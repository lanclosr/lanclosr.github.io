<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Know Your Risk: Flooding</title>

  <style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }

    .docking-control {
      font-family: "Avenir Next", "Helvetica Neue", Helvetica, Arial, sans-serif;
      position: absolute;
      z-index: 10;
      top: 50%;
      left: 50%;
      width: 250px;
      height: 80px;
      padding: 10px;
      box-sizing: border-box;
      margin: -40px 0 0 -125px;
      background-color: #fff;
      color: #323232;
      text-align: center;
      -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }

    .docking-control label {
      display: inline-block;
      font-weight: bold;
      margin: 0 0 10px 0;
      padding: 0;
      font-size: 16px;
    }
  </style>
    <link rel="stylesheet" href="css/style.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- Esri js4.9 -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.9/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="https://js.arcgis.com/4.9/esri/css/main.css">
    <script src="https://js.arcgis.com/4.9/"></script>

  <script>
    require([
      "esri/Map",
      "esri/views/MapView",
      "esri/WebMap",
      "esri/widgets/Locate",
      "esri/widgets/Search"
    ], function(
      Map, MapView, WebMap, Locate, Search
    ) {

      var webmap = new WebMap({
        portalItem: { // autocasts as new PortalItem()
          id: "2db7d9960d114d66b8797714855835e5"    
          //id: "b194a6d4272343adab640715f5e3f259"
        }
      });

      var view = new MapView({
        map: webmap,
        popup: {
          dockEnabled: true,
          dockOptions: {
            // Disables the dock button from the popup
            buttonEnabled: false,
            // Ignore the default sizes that trigger responsive docking
            breakpoint: false,
          }
        },
        container: "viewDiv"
      });

      var popup = view.popup;
    
      //add locate function and set a marker
      var locateWidget = new Locate({
          view: view,
          scale: 10000
      });

      // Add the locate widget to the top left corner of the view
      view.ui.add(locateWidget, {
          position: "top-left",
          index: 0
      });
        
      //add search widget for geocode
      var searchWidget = new Search({
        view: view,
        popupEnabled: false,
        locationEnabled: false,
        zoomScale: 10000
      });
      // Adds the search widget below other elements in
      // the top left corner of the view
      view.ui.add(searchWidget, {
          position: "top-left",
          index: 0
      });

      view.when(function() {

        var centerPoint = view.center.clone();

        popup.open({
          title: "Know Your Flood Risk",
          location: centerPoint,
          content: "<b>Green indicates that FEMA Flood Zone data is available for this county and can be used to assess your risk for flooding. Please use your location, or search for an address, to see your local flood risk. </b><br><br> If a county is not green, FEMA Flood Zone data is not available for this county."
        });
      });
    });
  </script>
</head>

<body>
    <nav class="navbar fixed-top navbar-light bg-dark">
        <a class="navbar-brand">
            <img src="img/floodimg.svg" width="30" height="30" class="d-inline-block align-top" alt="">  Know Your Flood Risk</a>
        <a class="navbar-xsmall"> Ryan Lanclos | University of Wisconsin-Madison</a>
    </nav>
    <div id="viewDiv"></div>
</body>

</html>